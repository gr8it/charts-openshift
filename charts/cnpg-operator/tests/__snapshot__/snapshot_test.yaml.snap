manifests should match snapshot:
  1: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: ClusterRole
    metadata:
      labels:
        app.kubernetes.io/instance: cnpg-operator
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: cnpg-operator
        app.kubernetes.io/version: v1.28.0
        helm.sh/chart: cnpg-operator-1.4.1
        rbac.authorization.k8s.io/aggregate-to-admin: "true"
        rbac.authorization.k8s.io/aggregate-to-edit: "true"
      name: cnpg-operator-objectstore-edit
    rules:
      - apiGroups:
          - barmancloud.cnpg.io
        resources:
          - objectstores
        verbs:
          - get
          - list
          - watch
          - create
          - update
          - patch
          - delete
  2: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: ClusterRole
    metadata:
      labels:
        app.kubernetes.io/instance: cnpg-operator
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: cnpg-operator
        app.kubernetes.io/version: v1.28.0
        helm.sh/chart: cnpg-operator-1.4.1
        rbac.authorization.k8s.io/aggregate-to-view: "true"
      name: cnpg-operator-objectstore-view
    rules:
      - apiGroups:
          - barmancloud.cnpg.io
        resources:
          - objectstores
        verbs:
          - get
          - list
          - watch
  3: |
    apiVersion: monitoring.coreos.com/v1
    kind: PodMonitor
    metadata:
      labels:
        app.kubernetes.io/instance: cnpg-operator
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: cnpg-operator
        app.kubernetes.io/version: v1.28.0
        helm.sh/chart: cnpg-operator-1.4.1
      name: cnpg-operator
      namespace: apc-cnpg-operator
    spec:
      namespaceSelector:
        matchNames:
          - apc-cnpg-operator
      podMetricsEndpoints:
        - port: metrics
      selector:
        matchLabels:
          app.kubernetes.io/name: cloudnative-pg
  4: |
    apiVersion: monitoring.coreos.com/v1
    kind: PrometheusRule
    metadata:
      labels:
        app.kubernetes.io/instance: cnpg-operator
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: cnpg-operator
        app.kubernetes.io/version: v1.28.0
        helm.sh/chart: cnpg-operator-1.4.1
      name: cnpg-operator
      namespace: apc-cnpg-operator
    spec:
      groups:
        - name: cnpg-operator.rules
          rules:
            - alert: CNPGOperatorDown
              annotations:
                description: CNPG operator pod has been down for more than 5 minutes
                summary: CNPG operator is not running
              expr: |
                absent(up{job="apc-cnpg-operator/cnpg-operator"}) == 1
              for: 5m
              labels:
                severity: warning
                team: platform
                vendor: aspecta
            - alert: CNPGOperatorReconciliationErrors
              annotations:
                description: CNPG operator has reconciliation errors
                summary: CNPG reconciliation errors detected
              expr: |
                increase(controller_runtime_reconcile_errors_total{job="apc-cnpg-operator/cnpg-operator"}[15m]) > 0
              for: 5m
              labels:
                severity: warning
                team: platform
                vendor: aspecta
            - alert: CNPGOperatorWebhookErrors
              annotations:
                description: CNPG operator is experiencing webhook errors for {{ $labels.webhook }}
                summary: CNPG operator webhook errors detected
              expr: |
                increase(controller_runtime_webhook_requests_total{job="apc-cnpg-operator/cnpg-operator", code="500"}[15m]) > 0
              for: 5m
              labels:
                severity: warning
                team: platform
                vendor: aspecta
