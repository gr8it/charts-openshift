apiVersion: kubernetes.vault.upbound.io/v1alpha1
kind: AuthBackendRole
metadata:
  name: {{ include "apc-global-overrides.require-clusterName" . }}-{{ .Values.vaultKubeAuthRole }}
spec:
  forProvider:
    # audience:
    backend: {{ include "external-secrets-config.vaultKubeAuthMountPath" . }}
    boundServiceAccountNames:
      - {{ .Values.kubeServiceAccount }}
    boundServiceAccountNamespaces:
      - {{ .Values.esoNamespace }}
    roleName: {{ .Values.vaultKubeAuthRole }}
    tokenPolicies:
      - default
      - {{ include "external-secrets-config.policyName" . }}
    tokenTtl: 900
  providerConfigRef:
    name: {{ include "external-secrets-config.vaultKubeVaultProviderConfigName" . }}
